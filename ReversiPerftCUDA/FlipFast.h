#pragma once
#include "MacrosHell.h"
#include "Moves.h"
#include "Position.h"

class CFlipper
{
public:
	CFlipper() = default;

	uint64_t Flip(const CPosition& pos, CMove move) const noexcept;
private:
	// outflank array (indexed with inner 6 bits)
	uint8_t OUTFLANK_2[64] = {
		0x00, 0x01, 0x00, 0x00, 0x10, 0x11, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x20, 0x21, 0x00, 0x00,
		0x00, 0x01, 0x00, 0x00, 0x10, 0x11, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x40, 0x41, 0x00, 0x00,
		0x00, 0x01, 0x00, 0x00, 0x10, 0x11, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x20, 0x21, 0x00, 0x00,
		0x00, 0x01, 0x00, 0x00, 0x10, 0x11, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x80, 0x81, 0x00, 0x00
	};

	uint8_t OUTFLANK_3[64] = {
		0x00, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x22, 0x21, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x42, 0x41, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x22, 0x21, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x82, 0x81, 0x00, 0x00, 0x00, 0x00
	};

	uint8_t OUTFLANK_4[64] = {
		0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x40, 0x40, 0x40, 0x40, 0x44, 0x44, 0x42, 0x41, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x80, 0x80, 0x80, 0x80, 0x84, 0x84, 0x82, 0x81, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	};

	uint8_t OUTFLANK_5[64] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x08, 0x08, 0x04, 0x04, 0x02, 0x01,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x88, 0x88, 0x88, 0x88, 0x84, 0x84, 0x82, 0x81,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	};

	uint8_t OUTFLANK_7[64] = {
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
		0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x08, 0x08, 0x08, 0x08, 0x04, 0x04, 0x02, 0x01
	};

	/** flip array (indexed with outflank, returns inner 6 bits) */
	uint64_t FLIPPED_2_H[130] = {
		0x0000000000000000ui64, 0x0202020202020202ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0808080808080808ui64, 0x0A0A0A0A0A0A0A0Aui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x1818181818181818ui64, 0x1A1A1A1A1A1A1A1Aui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x3838383838383838ui64, 0x3A3A3A3A3A3A3A3Aui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x7878787878787878ui64, 0x7A7A7A7A7A7A7A7Aui64
	};

	uint64_t FLIPPED_3_H[131] = {
		0x0000000000000000ui64, 0x0606060606060606ui64, 0x0404040404040404ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x1010101010101010ui64, 0x1616161616161616ui64, 0x1414141414141414ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x3030303030303030ui64, 0x3636363636363636ui64, 0x3434343434343434ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x7070707070707070ui64, 0x7676767676767676ui64, 0x7474747474747474ui64
	};

	uint64_t FLIPPED_4_H[133] = {
		0x0000000000000000ui64, 0x0e0e0e0e0e0e0e0Eui64, 0x0c0c0c0c0c0c0c0cui64, 0x0000000000000000ui64, 0x0808080808080808ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x2020202020202020ui64, 0x2E2E2E2E2E2E2E2Eui64, 0x2C2C2C2C2C2C2C2Cui64, 0x0000000000000000ui64, 0x2828282828282828ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x6060606060606060ui64, 0x6E6E6E6E6E6E6E6Eui64, 0x6C6C6C6C6C6C6C6Cui64, 0x0000000000000000ui64, 0x6868686868686868ui64
	};

	uint64_t FLIPPED_5_H[137] = {
		0x0000000000000000ui64, 0x1E1E1E1E1E1E1E1Eui64, 0x1C1C1C1C1C1C1C1Cui64, 0x0000000000000000ui64, 0x1818181818181818ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x1010101010101010ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x4040404040404040ui64, 0x5E5E5E5E5E5E5E5Eui64, 0x5C5C5C5C5C5C5C5Cui64, 0x0000000000000000ui64, 0x5858585858585858ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x5050505050505050ui64
	};

	uint64_t FLIPPED_3_V[131] = {
		0x0000000000000000ui64, 0x0000000000FFFF00ui64, 0x0000000000FF0000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x000000FF00000000ui64, 0x000000FF00FFFF00ui64, 0x000000FF00FF0000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000FFFF00000000ui64, 0x0000FFFF00FFFF00ui64, 0x0000FFFF00FF0000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x00FFFFFF00000000ui64, 0x00FFFFFF00FFFF00ui64, 0x00FFFFFF00FF0000ui64
	};

	uint64_t FLIPPED_4_V[133] = {
		0x0000000000000000ui64, 0x00000000FFFFFF00ui64, 0x00000000FFFF0000ui64, 0x0000000000000000ui64, 0x00000000FF000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000FF0000000000ui64, 0x0000FF00FFFFFF00ui64, 0x0000FF00FFFF0000ui64, 0x0000000000000000ui64, 0x0000FF00FF000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x00FFFF0000000000ui64, 0x00FFFF00FFFFFF00ui64, 0x00FFFF00FFFF0000ui64, 0x0000000000000000ui64, 0x00FFFF00FF000000ui64
	};

	uint64_t  FLIPPED_5_V[137] = {
		0x0000000000000000ui64, 0x000000FFFFFFFF00ui64, 0x000000FFFFFF0000ui64, 0x0000000000000000ui64, 0x000000FFFF000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x000000FF00000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x00FF000000000000ui64, 0x00FF00FFFFFFFF00ui64, 0x00FF00FFFFFF0000ui64, 0x0000000000000000ui64, 0x00FF00FFFF000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64, 0x0000000000000000ui64,
		0x00FF00FF00000000ui64
	};

	uint64_t A1(uint64_t P, uint64_t O) const noexcept;
	uint64_t B1(uint64_t P, uint64_t O) const noexcept;
	uint64_t C1(uint64_t P, uint64_t O) const noexcept;
	uint64_t D1(uint64_t P, uint64_t O) const noexcept;
	uint64_t E1(uint64_t P, uint64_t O) const noexcept;
	uint64_t F1(uint64_t P, uint64_t O) const noexcept;
	uint64_t G1(uint64_t P, uint64_t O) const noexcept;
	uint64_t H1(uint64_t P, uint64_t O) const noexcept;

	uint64_t A2(uint64_t P, uint64_t O) const noexcept;
	uint64_t B2(uint64_t P, uint64_t O) const noexcept;
	uint64_t C2(uint64_t P, uint64_t O) const noexcept;
	uint64_t D2(uint64_t P, uint64_t O) const noexcept;
	uint64_t E2(uint64_t P, uint64_t O) const noexcept;
	uint64_t F2(uint64_t P, uint64_t O) const noexcept;
	uint64_t G2(uint64_t P, uint64_t O) const noexcept;
	uint64_t H2(uint64_t P, uint64_t O) const noexcept;

	uint64_t A3(uint64_t P, uint64_t O) const noexcept;
	uint64_t B3(uint64_t P, uint64_t O) const noexcept;
	uint64_t C3(uint64_t P, uint64_t O) const noexcept;
	uint64_t D3(uint64_t P, uint64_t O) const noexcept;
	uint64_t E3(uint64_t P, uint64_t O) const noexcept;
	uint64_t F3(uint64_t P, uint64_t O) const noexcept;
	uint64_t G3(uint64_t P, uint64_t O) const noexcept;
	uint64_t H3(uint64_t P, uint64_t O) const noexcept;

	uint64_t A4(uint64_t P, uint64_t O) const noexcept;
	uint64_t B4(uint64_t P, uint64_t O) const noexcept;
	uint64_t C4(uint64_t P, uint64_t O) const noexcept;
	uint64_t D4(uint64_t P, uint64_t O) const noexcept;
	uint64_t E4(uint64_t P, uint64_t O) const noexcept;
	uint64_t F4(uint64_t P, uint64_t O) const noexcept;
	uint64_t G4(uint64_t P, uint64_t O) const noexcept;
	uint64_t H4(uint64_t P, uint64_t O) const noexcept;

	uint64_t A5(uint64_t P, uint64_t O) const noexcept;
	uint64_t B5(uint64_t P, uint64_t O) const noexcept;
	uint64_t C5(uint64_t P, uint64_t O) const noexcept;
	uint64_t D5(uint64_t P, uint64_t O) const noexcept;
	uint64_t E5(uint64_t P, uint64_t O) const noexcept;
	uint64_t F5(uint64_t P, uint64_t O) const noexcept;
	uint64_t G5(uint64_t P, uint64_t O) const noexcept;
	uint64_t H5(uint64_t P, uint64_t O) const noexcept;

	uint64_t A6(uint64_t P, uint64_t O) const noexcept;
	uint64_t B6(uint64_t P, uint64_t O) const noexcept;
	uint64_t C6(uint64_t P, uint64_t O) const noexcept;
	uint64_t D6(uint64_t P, uint64_t O) const noexcept;
	uint64_t E6(uint64_t P, uint64_t O) const noexcept;
	uint64_t F6(uint64_t P, uint64_t O) const noexcept;
	uint64_t G6(uint64_t P, uint64_t O) const noexcept;
	uint64_t H6(uint64_t P, uint64_t O) const noexcept;

	uint64_t A7(uint64_t P, uint64_t O) const noexcept;
	uint64_t B7(uint64_t P, uint64_t O) const noexcept;
	uint64_t C7(uint64_t P, uint64_t O) const noexcept;
	uint64_t D7(uint64_t P, uint64_t O) const noexcept;
	uint64_t E7(uint64_t P, uint64_t O) const noexcept;
	uint64_t F7(uint64_t P, uint64_t O) const noexcept;
	uint64_t G7(uint64_t P, uint64_t O) const noexcept;
	uint64_t H7(uint64_t P, uint64_t O) const noexcept;

	uint64_t A8(uint64_t P, uint64_t O) const noexcept;
	uint64_t B8(uint64_t P, uint64_t O) const noexcept;
	uint64_t C8(uint64_t P, uint64_t O) const noexcept;
	uint64_t D8(uint64_t P, uint64_t O) const noexcept;
	uint64_t E8(uint64_t P, uint64_t O) const noexcept;
	uint64_t F8(uint64_t P, uint64_t O) const noexcept;
	uint64_t G8(uint64_t P, uint64_t O) const noexcept;
	uint64_t H8(uint64_t P, uint64_t O) const noexcept;
};

uint64_t Flip(const CPosition& pos, CMove move) noexcept;